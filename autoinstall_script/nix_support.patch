--- a/autoinstall_script/AutoInstall.sh
+++ b/autoinstall_script/AutoInstall.sh
@@ -197,6 +197,15 @@
 install_deps() {
     CURRENT_STAGE="install_deps"
     log "INFO" "Installing dependencies..."
+    
+    # Check if running in Nix environment
+    if [ -n "${IN_NIX_SHELL:-}" ] || [ -n "${NIX_BUILD_TOP:-}" ]; then
+        log "INFO" "Detected Nix environment, skipping system package installation"
+        log "INFO" "Dependencies should be provided by the Nix environment"
+        # In Nix environment, dependencies are provided by flake.nix
+        return 0
+    fi
+    
     # Refresh package metadata
     if command -v dnf &> /dev/null; then
         dnf makecache -y
