/*
 * to_date
 */
SET NLS_DATE_FORMAT = 'MM-DD-YYYY HH24:MI:SS';
SELECT to_date('12-18-2011') FROM DUAL;
       to_date       
---------------------
 12-18-2011 00:00:00
(1 row)

SELECT to_date('2011-12-18') FROM DUAL;	--ERROR
ERROR:  The value of month is invalid.
SELECT to_date('2011 12  18', 'YYYY MM   DD') FROM DUAL;
       to_date       
---------------------
 12-18-2011 00:00:00
(1 row)

SELECT to_date(
    'January 15, 1989, 11:00 A.M.',
    'Month dd, YYYY, HH:MI A.M.',
     'NLS_DATE_LANGUAGE = American')
     FROM DUAL;
       to_date       
---------------------
 01-15-1989 11:00:00
(1 row)

/*
 * to_timestamp
 */
SET NLS_TIMESTAMP_FORMAT = 'MM-DD-YYYY HH24:MI:SS.FF9';
SELECT to_timestamp('10-9-2016 14:10:10.123000') FROM DUAL;
         to_timestamp          
-------------------------------
 10-09-2016 14:10:10.123000000
(1 row)

SELECT to_timestamp('2016-10-9 14:10:10.123000') FROM DUAL;
ERROR:  The value of month is invalid.
SELECT to_timestamp('10-9-2016 14:10:10.123000', 'DD-MM-YYYY HH24:MI:SS.FF9') FROM DUAL;
         to_timestamp          
-------------------------------
 09-10-2016 14:10:10.123000000
(1 row)

SELECT to_timestamp(
	'10-9-2016 14:10:10.123000', 
	'DD-MM-YYYY HH24:MI:SS.FF9',
	'NLS_DATE_LANGUAGE = American') FROM DUAL;
         to_timestamp          
-------------------------------
 09-10-2016 14:10:10.123000000
(1 row)

	
/*
 * to_timestamp_tz
 */
SET NLS_TIMESTAMP_TZ_FORMAT = 'MM-DD-YYYY HH24:MI:SS.FF9 TZH:TZM';
SELECT to_timestamp_tz('10-9-2016 14:10:10.123000') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 10-09-2016 14:10:10.123000000 -07:00
(1 row)

SELECT to_timestamp_tz('2016-10-9 14:10:10.123000') FROM DUAL;
ERROR:  The value of month is invalid.
SELECT to_timestamp_tz('10-9-2016 14:10:10.123000', 'DD-MM-YYYY HH24:MI:SS.FF9') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 09-10-2016 14:10:10.123000000 -07:00
(1 row)

SELECT to_timestamp_tz(
	'10-9-2016 14:10:10.123000', 
	'DD-MM-YYYY HH24:MI:SS.FF9',
	'NLS_DATE_LANGUAGE = American') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 09-10-2016 14:10:10.123000000 -07:00
(1 row)

SELECT to_timestamp_tz('10-9-2016 14:10:10.123000 +8:30', 'DD-MM-YYYY HH24:MI:SS.FF TZH:TZM') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 09-09-2016 22:40:10.123000000 -07:00
(1 row)

SELECT to_timestamp_tz('10-9-2016 14:10:10.123000 +1:00', 'DD-MM-YYYY HH24:MI:SS.FF TZH:TZM') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 09-10-2016 06:10:10.123000000 -07:00
(1 row)

SELECT to_timestamp_tz('10-9-2016 14:10:10.123000 -12:00', 'DD-MM-YYYY HH24:MI:SS.FF TZH:TZM') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 09-10-2016 19:10:10.123000000 -07:00
(1 row)

SELECT to_timestamp_tz('10-9-2016 14:10:10.123000 -13:00', 'DD-MM-YYYY HH24:MI:SS.FF TZH:TZM') FROM DUAL;
           to_timestamp_tz            
--------------------------------------
 09-10-2016 20:10:10.123000000 -07:00
(1 row)

/*
 * to_char
 */
-- to_char function for date data type 
SET NLS_DATE_FORMAT = 'MM-DD-YYYY HH24:MI:SS';
CREATE TABLE to_char_tbl(a date);
INSERT INTO to_char_tbl VALUES('11-22-1990 11:11:11');
SELECT to_char(a) FROM to_char_tbl;
       to_char       
---------------------
 11-22-1990 11:11:11
(1 row)

SELECT to_char(a, 'DD-MM-YYYY') FROM to_char_tbl;
  to_char   
------------
 22-11-1990
(1 row)

SELECT to_char(a, 'DD-MM-YYYY HH24:MI:SS') FROM to_char_tbl;
       to_char       
---------------------
 22-11-1990 11:11:11
(1 row)

SELECT to_char(
	a, 
	'DD-MM-YYYY HH24:MI:SS',
	'NLS_DATE_LANGUAGE = American') FROM to_char_tbl;
       to_char       
---------------------
 22-11-1990 11:11:11
(1 row)

DROP TABLE to_char_tbl;
-- to_char function for timestamp data type
SET NLS_TIMESTAMP_FORMAT = 'MM-DD-YYYY HH24:MI:SS.FF9';
CREATE TABLE to_char_tbl(a timestamp);
INSERT INTO to_char_tbl VALUES('11-22-1990 11:11:11.123456');
SELECT to_char(a) FROM to_char_tbl;
            to_char            
-------------------------------
 11-22-1990 11:11:11.123456000
(1 row)

SELECT to_char(a, 'DD-MM-YYYY') FROM to_char_tbl;
  to_char   
------------
 22-11-1990
(1 row)

SELECT to_char(a, 'DD-MM-YYYY HH24:MI:SS.FF9') FROM to_char_tbl;
            to_char            
-------------------------------
 22-11-1990 11:11:11.123456000
(1 row)

SELECT to_char(
	a, 
	'DD-MM-YYYY HH24:MI:SS.FF9',
	'NLS_DATE_LANGUAGE = American') FROM to_char_tbl;
            to_char            
-------------------------------
 22-11-1990 11:11:11.123456000
(1 row)

DROP TABLE to_char_tbl;
-- to_char function for timestamp with time zone data type
SET NLS_TIMESTAMP_TZ_FORMAT = 'MM-DD-YYYY HH24:MI:SS.FF9 TZH:TZM';
CREATE TABLE to_char_tbl(a timestamp with time zone);
INSERT INTO to_char_tbl VALUES(timestamp'1990-11-22 11:11:11.123456 +06:30');
SELECT to_char(a) FROM to_char_tbl;
               to_char                
--------------------------------------
 11-21-1990 20:41:11.123456000 -08:00
(1 row)

SELECT to_char(a, 'DD-MM-YYYY') FROM to_char_tbl;
  to_char   
------------
 21-11-1990
(1 row)

SELECT to_char(a, 'DD-MM-YYYY HH24:MI:SS.FF9') FROM to_char_tbl;
            to_char            
-------------------------------
 21-11-1990 20:41:11.123456000
(1 row)

SELECT to_char(
	a, 
	'DD-MM-YYYY HH24:MI:SS.FF9',
	'NLS_DATE_LANGUAGE = American') FROM to_char_tbl;
            to_char            
-------------------------------
 21-11-1990 20:41:11.123456000
(1 row)

DROP TABLE to_char_tbl;
-- oracle sys date func
--bug#0000857
SET nls_timestamp_format = 'DD-MON-YY HH24:MI:SS.US';
set NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS';
--sys_setract_utc 
CREATE table datetest (aa timestamp);
insert into datetest values (sys_extract_utc(timestamp '2018-03-02 12:01:02'));
insert into datetest values (sys_extract_utc(timestamp '2018-03-02 12:01:02 +1:00'));
select * from datetest;
            aa             
---------------------------
 02-MAR-18 20:01:02.000000
 02-MAR-18 11:01:02.000000
(2 rows)

drop table datetest;
--to_date
select to_date('19901212','YYYYMMDD');
       to_date       
---------------------
 1990-12-12 00:00:00
(1 row)

select to_date('19901212','YYYY-MM-DD');
       to_date       
---------------------
 1990-12-12 00:00:00
(1 row)

select to_date('19901212','YYYY&MM&DD');
       to_date       
---------------------
 1990-12-12 00:00:00
(1 row)

select to_date('1990-12-12','YYYY-MM-DD');
       to_date       
---------------------
 1990-12-12 00:00:00
(1 row)

--current_date,current_timestamp
create table datetest as select current_date, current_timestamp, localtimestamp;
select attname, typname from pg_attribute, pg_type where attrelid in (select oid from pg_class where relname = 'datetest') and attnum > 0 and atttypid = pg_type.oid;
      attname      |    typname     
-------------------+----------------
 current_date      | oradate
 current_timestamp | oratimestamptz
 localtimestamp    | oratimestamp
(3 rows)

drop table datetest;
--to_char
create table datetest (aa varchar2(100),bb number);
insert into datetest values (to_char(date '2017-03-12'),1);
insert into datetest values (to_char(date '2017-03-12','DD-MM-YYYY'),2);
insert into datetest values (to_char(date '2017-03-12','DD-MM-YYYY HH24:MI:SS','NLS_DATE_LANGUAGE = english'),3);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23'),4);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23','DD-MM-YYYY'),5);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23','DD-MM-YYYY HH24:MI:SS'),6);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23','DD-MM-YYYY HH:MI:SS AM'),7);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23','DD-MM-YYYY HH24:MI:SS','NLS_DATE_LANGUAGE = english'),8);
insert into datetest values (to_char(timestamptz '2017-03-12 13:12:23 +2:00'),9);
insert into datetest values (to_char(timestamptz '2017-03-12 13:12:23 +2:00','DD-MM-YYYY'),10);
insert into datetest values (to_char(timestamptz '2017-03-12 13:12:23 +2:00','DD-MM-YYYY HH24:MI:SS'),11);
insert into datetest values (to_char(timestamptz '2017-03-12 13:12:23 +2:00','DD-MM-YYYY HH:MI:SS AM'),12);
insert into datetest values (to_char(timestamptz '2017-03-12 13:12:23 +2:00','DD-MM-YYYY HH24:MI:SS','NLS_DATE_LANGUAGE = english'),13);
insert into datetest values (to_char(INTERVAL '123-2' YEAR(3) TO MONTH),14);
insert into datetest values (to_char(INTERVAL '123-2' YEAR(3) TO MONTH,'DD-MM-YYYY'),15);
insert into datetest values (to_char(INTERVAL '123 13:12:34' DAY(3) TO SECOND),16);
insert into datetest values (to_char(INTERVAL '123 13:12:34' DAY(3) TO SECOND(4),'DD-MM-YYYY HH24:MI:SS'),17);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23','Month MONTH Mon MoN MI Mi mi'),18);
insert into datetest values (to_char(timestamp '2017-03-12 13:12:23','YYYY-text'),19);
ERROR:  date format not recognized
select * from datetest;
                  aa                  | bb 
--------------------------------------+----
 2017-03-12 00:00:00                  | 1
 12-03-2017                           | 2
 12-03-2017 00:00:00                  | 3
 12-MAR-17 13:12:23.000000            | 4
 12-03-2017                           | 5
 12-03-2017 13:12:23                  | 6
 12-03-2017 01:12:23 PM               | 7
 12-03-2017 13:12:23                  | 8
 03-12-2017 04:12:23.000000000 -07:00 | 9
 12-03-2017                           | 10
 12-03-2017 04:12:23                  | 11
 12-03-2017 04:12:23 AM               | 12
 12-03-2017 04:12:23                  | 13
 +000000123-02                        | 14
 +000000123-02                        | 15
 +000000123 13:12:34.000000000        | 16
 +000000123 13:12:34.000000000        | 17
 March     MARCH     Mar Mar 12 12 12 | 18
(18 rows)

drop table datetest;
--ADD_MONTHS
create table datetest (aa date);
insert into datetest values (ADD_MONTHS(date '2018-01-23',2));
insert into datetest values (ADD_MONTHS(date '2018-01-23',13));
insert into datetest values (ADD_MONTHS(timestamp '2018-01-23 13:12:14',2));
insert into datetest values (ADD_MONTHS(timestamp '2018-01-23 12:34:45',13));
insert into datetest values (ADD_MONTHS(date'2017-1-30',1.1));
select * from datetest;
         aa          
---------------------
 2018-03-23 00:00:00
 2019-02-23 00:00:00
 2018-03-23 13:12:14
 2019-02-23 12:34:45
 2017-02-28 00:00:00
(5 rows)

drop table datetest;
--LAST_DAY
create table datetest (aa date);
insert into datetest values (LAST_DAY(date '2018-01-23'));
insert into datetest values (LAST_DAY(date '2018-02-12'));
select * from datetest;
         aa          
---------------------
 2018-01-31 00:00:00
 2018-02-28 00:00:00
(2 rows)

drop table datetest;
--NEXT_DAY
create table datetest (aa date);
insert into datetest values (NEXT_DAY(date '2018-01-23 13:12:34','mon'));
ERROR:  trailing characters remain in input string after datetime format
insert into datetest values (NEXT_DAY(date '2018-02-12',2));
insert into datetest values (NEXT_DAY(date '2018-02-12','monday'));
select * from datetest;
         aa          
---------------------
 2018-02-19 00:00:00
 2018-02-19 00:00:00
(2 rows)

drop table datetest;
--MONTHS_BETWEEN
create table datetest (aa number);
insert into datetest values (MONTHS_BETWEEN(date '2018-01-23 13:12:34',date '2014-08-2 13:12:34'));
ERROR:  trailing characters remain in input string after datetime format
insert into datetest values (MONTHS_BETWEEN(date '1990-09-29',date '2018-07-13'));
insert into datetest values (MONTHS_BETWEEN(TIMESTAMP '2018-08-09 08:30:00',TIMESTAMP '2018-08-1 09:00:00'));
select * from datetest;
        aa         
-------------------
 -333.483870967742
 0.25739247311828
(2 rows)

drop table datetest;
--ROUND
create table datetest (aa date);
insert into datetest values (ROUND(date '2018-01-23'));
insert into datetest values (ROUND(date '2018-08-12','cc'));
insert into datetest values (ROUND(date '2018-07-01','yyyy'));
insert into datetest values (ROUND(date '2018-06-30','yyyy'));
insert into datetest values (ROUND(date '2018-04-12','iyyy'));
insert into datetest values (ROUND(date '2018-08-12','q'));
insert into datetest values (ROUND(date '2018-08-12','mm'));
insert into datetest values (ROUND(date '2018-08-16','mm'));
insert into datetest values (ROUND(date '2018-08-12','ww'));
insert into datetest values (ROUND(date '2018-08-12','iw'));
insert into datetest values (ROUND(date '2018-08-12','w'));
insert into datetest values (ROUND(to_date('2018-7-25 11:59:59'),'dd')); 
insert into datetest values (ROUND(to_date('2018-7-25 12:00:00'),'dd')); 
insert into datetest values (ROUND(date '1966-07-27','day'));
insert into datetest values (ROUND(to_date('2018-7-25 13:29:59'),'hh'));  
insert into datetest values (ROUND(to_date('2018-7-25 13:30:23'),'hh'));  
insert into datetest values (ROUND(to_date('2018-7-25 13:29:29'),'mi')); 
insert into datetest values (ROUND(to_date('2018-7-25 13:29:31'),'mi'));  
select * from datetest;
         aa          
---------------------
 2018-01-23 00:00:00
 2001-01-01 00:00:00
 2019-01-01 00:00:00
 2018-01-01 00:00:00
 2018-01-01 00:00:00
 2018-07-01 00:00:00
 2018-08-01 00:00:00
 2018-09-01 00:00:00
 2018-08-13 00:00:00
 2018-08-13 00:00:00
 2018-08-15 00:00:00
 2018-07-25 00:00:00
 2018-07-26 00:00:00
 1966-07-24 00:00:00
 2018-07-25 13:00:00
 2018-07-25 14:00:00
 2018-07-25 13:29:00
 2018-07-25 13:30:00
(18 rows)

drop table datetest;
--trunc
create table datetest (aa date);
insert into datetest values (TRUNC(date '2018-01-23'));
insert into datetest values (TRUNC(date '2018-08-12','cc'));
insert into datetest values (TRUNC(date '2018-07-01','yyyy'));
insert into datetest values (TRUNC(date '2018-06-30','yyyy'));
insert into datetest values (TRUNC(date '2018-04-12','iyyy'));
insert into datetest values (TRUNC(date '2018-08-12','q'));
insert into datetest values (TRUNC(date '2018-08-12','mm'));
insert into datetest values (TRUNC(date '2018-08-16','mm'));
insert into datetest values (TRUNC(date '2018-08-12','ww'));
insert into datetest values (TRUNC(date '2018-08-12','iw'));
insert into datetest values (TRUNC(date '2018-08-12','w'));
insert into datetest values (TRUNC(to_date('2018-7-25 11:59:59'),'dd')); 
insert into datetest values (TRUNC(to_date('2018-7-25 12:00:00'),'dd')); 
insert into datetest values (TRUNC(date '1966-07-27','day'));
insert into datetest values (TRUNC(to_date('2018-7-25 13:29:59'),'hh'));  
insert into datetest values (TRUNC(to_date('2018-7-25 13:30:23'),'hh'));  
insert into datetest values (TRUNC(to_date('2018-7-25 13:29:29'),'mi')); 
insert into datetest values (TRUNC(to_date('2018-7-25 13:29:31'),'mi'));  
select * from datetest;
         aa          
---------------------
 2018-01-23 00:00:00
 2001-01-01 00:00:00
 2018-01-01 00:00:00
 2018-01-01 00:00:00
 2018-01-01 00:00:00
 2018-07-01 00:00:00
 2018-08-01 00:00:00
 2018-08-01 00:00:00
 2018-08-06 00:00:00
 2018-08-06 00:00:00
 2018-08-08 00:00:00
 2018-07-25 00:00:00
 2018-07-25 00:00:00
 1966-07-24 00:00:00
 2018-07-25 13:00:00
 2018-07-25 13:00:00
 2018-07-25 13:29:00
 2018-07-25 13:29:00
(18 rows)

drop table datetest;
--NUMTODSINTERVAL
create table datetest (aa interval day(3) to second);
insert into datetest values (NUMTODSINTERVAL(123,'day'));
insert into datetest values (NUMTODSINTERVAL(234,'hour'));
insert into datetest values (NUMTODSINTERVAL(345,'minute'));
insert into datetest values (NUMTODSINTERVAL(678,'second'));
select * from datetest;
          aa          
----------------------
 +123 00:00:00.000000
 +009 18:00:00.000000
 +000 05:45:00.000000
 +000 00:11:18.000000
(4 rows)

drop table datetest;
--NUMTOYMINTERVAL
create table datetest (aa interval year(3) to month);
insert into datetest values (NUMTOYMINTERVAL(123,'year'));
insert into datetest values (NUMTOYMINTERVAL(234,'month'));
select * from datetest;
   aa    
---------
 +123-00
 +019-06
(2 rows)

drop table datetest;
--TO_DSINTERVAL
create table datetest (aa interval day(3) to second);
insert into datetest values (TO_DSINTERVAL('789 13:23:34'));
insert into datetest values (TO_DSINTERVAL('789 13  : 23 : 34'));/* BUGID:0000440 */
insert into datetest values (TO_DSINTERVAL('P100DT210H100M299.898S'));
insert into datetest values (TO_DSINTERVAL(' P0DT0.0S'));   /* BUGID:0000436 */
select * from datetest;
          aa          
----------------------
 +789 13:23:34.000000
 +789 13:23:34.000000
 +108 19:44:59.898000
 +000 00:00:00.000000
(4 rows)

drop table datetest;
--TO_YMINTERVAL
create table datetest (aa interval year(9) to month);
insert into datetest values (TO_YMINTERVAL('567-08'));
insert into datetest values (TO_YMINTERVAL('P234Y8M66DT100H'));
insert into datetest values (TO_YMINTERVAL('99999999 - 1'));  /* BUGID:0000440 */
select * from datetest;
      aa       
---------------
 +000000567-08
 +000000234-08
 +099999999-01
(3 rows)

drop table datetest;
--new_time
create table datetest (aa date, bb date);
insert into datetest values (date '2018-7-16',new_time(date '2018-7-16','GMT','AST'));
insert into datetest values (date '1998-2-26',new_time(date '1998-2-26','ADT','YDT'));
insert into datetest values (date '1998-2-26',new_time(date '1998-2-26','PST','CDT'));
insert into datetest values (date '1998-2-26',new_time(date '1998-2-26','YST','BST'));
select * from datetest;
         aa          |         bb          
---------------------+---------------------
 2018-07-16 00:00:00 | 2018-07-15 20:00:00
 1998-02-26 00:00:00 | 1998-02-25 19:00:00
 1998-02-26 00:00:00 | 1998-02-26 03:00:00
 1998-02-26 00:00:00 | 1998-02-25 22:00:00
(4 rows)

drop table datetest;
--tz_offset
create table datetest (aa varchar2(100));
insert into datetest values (tz_offset('Asia/Shanghai'));
insert into datetest values (tz_offset('GMT'));
select tz_offset('-12:59') from dual; /* BUG:0000444 */
 tz_offset 
-----------
 -12:59
(1 row)

select tz_offset('+14:05') from dual; /* BUG:0000444 */
ERROR:  timezone minute between 0 and 59
	
select * from datetest;
   aa   
--------
 +08:00
 +00:00
(2 rows)

drop table datetest;
--from_tz
SELECT FROM_TZ(TIMESTAMP '2000-03-28 08:00:00', '3:00') FROM DUAL;
               from_tz                
--------------------------------------
 03-27-2000 21:00:00.000000000 -08:00
(1 row)

  
--sessiontimezone
set timezone = 'Asia/Hong_Kong';
select sessiontimezone() from dual; /* BUG:0000427 */
 sessiontimezone 
-----------------
 Asia/Hong_Kong
(1 row)

alter session set nls_date_format='YYYY-MM-DD HH24:MI:SS';
alter session set nls_timestamp_format = 'YYYY-MM-DD HH24:MI:SS.ff';
/*
 * round
 */
select round(to_timestamp_tz('2012-12-12 12:00:00 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM')) from dual;
        round        
---------------------
 2012-12-13 00:00:00
(1 row)

select round(to_timestamp_tz('2012-12-12 12:00:00 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'CC') from dual;
        round        
---------------------
 2001-01-01 00:00:00
(1 row)

select round(to_timestamp_tz('2050-12-12 12:00:00 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'SCC') from dual;
        round        
---------------------
 2101-01-01 00:00:00
(1 row)

select round(to_timestamp_tz('2051-12-12 12:00:00 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'SCC') from dual;
        round        
---------------------
 2101-01-01 00:00:00
(1 row)

select round(to_timestamp_tz('2050-06-12 19:20:21 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'SYYYY') from dual;
        round        
---------------------
 2050-01-01 00:00:00
(1 row)

select round(to_timestamp_tz('2050-06-12 16:40:55 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'IYYY') from dual;
        round        
---------------------
 2050-01-03 00:00:00
(1 row)

select round(to_timestamp_tz('2020-02-16 19:16:12 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'Q') from dual;
        round        
---------------------
 2020-04-01 00:00:00
(1 row)

select round(to_timestamp_tz('2020-09-27 18:30:21 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'MONTH') from dual;
        round        
---------------------
 2020-10-01 00:00:00
(1 row)

select round(to_timestamp_tz('2020-03-15 12:12:19 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'WW') from dual;
        round        
---------------------
 2020-03-18 00:00:00
(1 row)

select round(to_timestamp_tz('2020-02-28 10:00:01 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'IW') from dual;
        round        
---------------------
 2020-03-02 00:00:00
(1 row)

select round(to_timestamp_tz('2020-02-23 12:12:14 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'W') from dual;
        round        
---------------------
 2020-02-22 00:00:00
(1 row)

select round(to_timestamp_tz('2020-06-18 13:12:18 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'DDD') from dual;
        round        
---------------------
 2020-06-19 00:00:00
(1 row)

select round(to_timestamp_tz('2020-02-29 14:40:20 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'DAY') from dual;
        round        
---------------------
 2020-03-01 00:00:00
(1 row)

select round(to_timestamp_tz('2020-02-29 11:40:20 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'HH') from dual;
        round        
---------------------
 2020-02-29 12:00:00
(1 row)

select round(to_timestamp_tz('2020-06-18 14:40:20 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'MI') from dual;
        round        
---------------------
 2020-06-18 14:40:00
(1 row)
/*
 * trunc
 */
select trunc(to_timestamp_tz('2051-12-12 12:00:00 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'SCC') from dual;
        trunc        
---------------------
 2001-01-01 00:00:00
(1 row)

select trunc(to_timestamp_tz('2050-06-12 19:20:21 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'SYYYY') from dual;
        trunc        
---------------------
 2050-01-01 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-28 16:40:55 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'IYYY') from dual;
        trunc        
---------------------
 2019-12-30 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-28 19:16:12 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'Q') from dual;
        trunc        
---------------------
 2020-01-01 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-09-27 18:30:21 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'MONTH') from dual;
        trunc        
---------------------
 2020-09-01 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-03-15 12:12:19 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'WW') from dual;
        trunc        
---------------------
 2020-03-11 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-28 10:00:01 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'IW') from dual;
        trunc        
---------------------
 2020-02-24 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-23 12:12:14 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'W') from dual;
        trunc        
---------------------
 2020-02-22 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-06-18 13:12:18 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'DDD') from dual;
        trunc        
---------------------
 2020-06-18 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-29 14:40:20 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'DAY') from dual;
        trunc        
---------------------
 2020-02-23 00:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-29 11:40:20 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'HH') from dual;
        trunc        
---------------------
 2020-02-29 11:00:00
(1 row)

select trunc(to_timestamp_tz('2020-02-29 14:40:50 + 08', 'YYYY-MM-DD HH24:MI:SS TZH:TZM'), 'MI') from dual;
        trunc        
---------------------
 2020-02-29 14:40:00
(1 row)
alter session set NLS_DATE_FORMAT='DD-MON-RR HH24:MI:SS';
--select sysdate() from dual;

alter session set NLS_DATE_FORMAT='DD-MON-RR HH24:MI:SS';
--select current_date from dual;
